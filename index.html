<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Text to PDF Converter</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body class="min-h-screen flex items-center justify-center bg-gradient-to-r from-indigo-200 via-purple-200 to-pink-200 p-3 sm:p-4">

  <div class="bg-white shadow-2xl rounded-2xl p-4 sm:p-8 w-full max-w-2xl">
    <!-- Dedication -->
    <h1 class="text-center text-sm sm:text-lg font-semibold text-gray-600 mb-4 leading-snug">
      ðŸŒ¸ This web is generated by <span class="text-indigo-600">Rana Ali Haider</span>  
      for <span class="text-pink-600">Dr Musadiq Hussain</span> with Pure Heart ðŸŒ¸
    </h1>

    <!-- Title -->
    <h2 class="text-lg sm:text-2xl font-bold text-center text-gray-800 mb-4 sm:mb-6">
      Convert Text to PDF
    </h2>

    <!-- Textarea -->
    <textarea id="inputText" placeholder="Type your text here..."
      class="w-full h-36 sm:h-48 p-3 border rounded-xl shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-400 resize-none text-gray-700 text-sm sm:text-base"></textarea>

    <!-- Checkbox for formatting -->
    <div class="flex items-center gap-2 mt-4">
      <input type="checkbox" id="formatCheck" class="w-4 h-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-400">
      <label for="formatCheck" class="text-gray-700 text-sm sm:text-base">Apply automatic formatting</label>
    </div>

    <!-- Checkbox for page numbers -->
    <div class="flex items-center gap-2 mt-2">
      <input type="checkbox" id="pageNumCheck" class="w-4 h-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-400">
      <label for="pageNumCheck" class="text-gray-700 text-sm sm:text-base">Add page numbers at bottom</label>
    </div>

    <!-- Output file name input -->
    <div class="flex flex-col sm:flex-row items-start sm:items-center gap-2 mt-4">
      <label for="outputFileName" class="text-gray-700 text-sm sm:text-base">Output file name:</label>
      <div class="flex items-center gap-1 w-full sm:w-auto">
        <input type="text" id="outputFileName" class="flex-1 sm:flex-none border rounded-lg px-2 py-1 text-gray-700 text-sm sm:text-base" placeholder="output" value="output">
        <span class="text-gray-700 text-sm sm:text-base">.pdf</span>
      </div>
    </div>

    <!-- Controls -->
    <div class="flex flex-col sm:flex-row items-stretch sm:items-center justify-center gap-3 sm:gap-4 mt-6">
      <button onclick="convert()"
        class="w-full sm:w-auto px-5 py-3 bg-gradient-to-r from-indigo-500 to-purple-500 text-white font-semibold rounded-xl shadow-md hover:shadow-xl transform hover:scale-105 transition duration-300 text-sm sm:text-base">
        Convert to PDF
      </button>
    </div>
  </div>

  <script>
    // âœ… Auto formatting function
    function autoFormatText(text) {
      text = text.replace(/\s+/g, " ").trim(); 
      text = text.replace(/([.?!]\s+|^)([a-z])/g, (m, sep, char) => sep + char.toUpperCase());
      text = text.replace(/\n\s*/g, "\n");
      return text;
    }

    function convert() {
      let text = document.getElementById("inputText").value;
      const applyFormatting = document.getElementById("formatCheck").checked;
      const addPageNumbers = document.getElementById("pageNumCheck").checked;

      const fileNameInput = document.getElementById("outputFileName");
      let fileName = fileNameInput && fileNameInput.value.trim() ? fileNameInput.value.trim() : "output";
      fileName = fileName.replace(/\.[^.]+$/, "");
      fileName += ".pdf";

      if (!text.trim()) {
        alert("Please enter some text!");
        return;
      }

      if (applyFormatting) {
        text = autoFormatText(text);
      }

      generatePDF(text, addPageNumbers, fileName);
    }

    // âœ… PDF generator with multi-page + optional page numbers
    function generatePDF(text, addPageNumbers, fileName) {
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();
      const pageHeight = doc.internal.pageSize.height;
      const pageWidth = doc.internal.pageSize.width;
      const margin = 10;
      let y = margin;
      let pageNumber = 1;

      const splitText = doc.splitTextToSize(text, 180);

      splitText.forEach(line => {
        if (y + 10 > pageHeight - margin) {
          if (addPageNumbers) {
            doc.setFontSize(10);
            doc.text(`Page ${pageNumber}`, pageWidth / 2, pageHeight - 10, { align: "center" });
          }
          doc.addPage();
          y = margin;
          pageNumber++;
        }
        doc.setFontSize(12);
        doc.text(line, 10, y);
        y += 10;
      });

      if (addPageNumbers) {
        doc.setFontSize(10);
        doc.text(`Page ${pageNumber}`, pageWidth / 2, pageHeight - 10, { align: "center" });
      }

      doc.save(fileName);
    }
  </script>
</body>
</html>
